---
title: "[React] Recoil ì‚¬ìš©í•˜ê¸°"
date: 2023-07-26T19:02:000
categories: [React]
tags: [react] #ì†Œë¬¸ìë§Œ ê°€ëŠ¥
---

---

## <b>Recoil ì‚¬ìš©í•˜ê¸°</b>

Recoilì€ Facebookì—ì„œ ê°œë°œí•œ ì˜¤í”ˆì†ŒìŠ¤ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, React ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ìƒíƒœë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.

<h3><blockquote>ì„¤ì¹˜
</blockquote></h3>

```jsx
//npm
npm install recoil
//yarn
yarn add recoil
```

<h3><blockquote>RecoilRoot
</blockquote></h3>

- Recoilì—ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì»¨í…Œì´ë„ˆ ì»´í¬ë„ŒíŠ¸

recoilì—ì„œ ì œê³µí•˜ëŠ” RecoilRootë¥¼ ì•±ì˜ ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ì‹¸ì•¼ í•œë‹¤. ê·¸ë˜ì•¼ë§Œ recoilì˜ ì›ì(Atom)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```jsx
//index.js or App.js
import React from "react";
import ReactDOM from "react-dom";
import { RecoilRoot } from "recoil";
import App from "./App";

ReactDOM.render(
  <RecoilRoot>
    <App />
  </RecoilRoot>,
  document.getElementById("root")
);
```

<h3><blockquote>Atom
</blockquote></h3>

Recoilì—ì„œ atomì€ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìµœì†Œ ë‹¨ìœ„ì´ë‹¤.

- key: ê³ ìœ í•œ í‚¤ë¥¼ ì§€ì •í•˜ì—¬ í•´ë‹¹ ìƒíƒœë¥¼ ì‹ë³„
- default: ì´ˆê¸° ìƒíƒœ ê°’ ì§€ì •

```js
//atom.js
import { atom } from "recoil";

export const countAtom = atom({
  key: "count",
  default: 0,
});
```

<h3><blockquote>Atoms Hook
</blockquote></h3>

atomì€ <strong>useRecoilState</strong>, <strong>useRecoilValue</strong>, <strong>useSetRecoilState</strong>ì™€ ê°™ì€ Recoil í›…ì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ ìƒíƒœì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ğŸ’¡ useRecoilState

useRecoilState í›…ì€ ë‘ ê°œì˜ ê°’ [state, setState]ë¥¼ ë°˜í™˜í•˜ë©°

- <b>state</b>: ì›ì(Atom)ì˜ í˜„ì¬ ê°’ì„ ì½ì„ ìˆ˜ ìˆë‹¤
- <b>setState</b>: ì›ì(Atom)ì˜ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤

```jsx
import { useRecoilState } from "recoil";
import { countAtom } from "./atoms";

export default function App() {
  const [count, setCount] = useRecoilState(countAtom);

  const increment = () => setCount(count + 1);
  const decrement = () => setCount(count - 1);

  return (
    <div>
      <h1>Count: {count}</h1>
      <button onClick={increment}>ë”í•˜ê¸°</button>
      <button onClick={decrement}>ë¹¼ê¸°</button>
    </div>
  );
}
```

#### ğŸ’¡ useRecoilValue

ì›í•˜ëŠ” ì›ì(Atom)ì˜ ìƒíƒœë¥¼ ì½ê¸° ìœ„í•´ ì‚¬ìš©ë˜ë©° í•´ë‹¹ ì›ì(Atom)ì˜ ìµœì‹  ìƒíƒœë¥¼ ë°˜í™˜í•œë‹¤. ë§Œì•½ ì»´í¬ë„ŒíŠ¸ê°€ ì´ ì›ì(Atom)ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´, ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ìë™ìœ¼ë¡œ ë¦¬ë Œë”ë§ëœë‹¤.

```jsx
import { useRecoilValue } from "recoil";
import { countAtom } from "./atoms";

export default function App() {
  const count = useRecoilValue(countAtom);

  return <h1>Count: {count}</h1>;
}
```

#### ğŸ’¡ useSetRecoilState

ì›í•˜ëŠ” ì›ì(atom)ì˜ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.

```jsx
import { useSetRecoilState } from "recoil";
import { countAtom } from "./atoms";

export default function App() {
  const setCount = useSetRecoilState(countAtom);

  const addOnClick = () => setCount((prevCount) => prevCount + 1);

  return (
    <div>
      <h1>Count: {count}</h1>
      <button onClick={addOnClick}>ì¦ê°€</button>
    </div>
  );
}
```

#### ğŸ’¡ Selector

SelectorsëŠ” í•˜ë‚˜ ì´ìƒì˜ ì›ì(Atom)ë¡œë¶€í„° ê°’ì„ ê³„ì‚°í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ê¸°ë³¸ ê°œë…ì´ë‹¤.

- <b>get</b>: ë§¤ê°œë³€ìˆ˜ë¥¼ í†µí•´ ì›ì(Atom)ì˜ ê°’ì„ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

```js
//atom.js
import { atom, selector } from "recoil";

//í˜„ì¬ ì˜ˆì‚°
export const budgetAtom = atom({
  key: "budget",
  default: 70000,
});

//êµ¬ë§¤ ê¸ˆì•¡
export const buyAmountAtom = atom({
  key: "buyAmount",
  default: 30000,
});

//í˜„ì¬ ë‚¨ì€ ì˜ˆì‚°
export const remainingAmountAtom = selector({
  key: "remainingAmount",
  get: ({ get }) => {
    const budget = get(budgetAtom); // 70000
    const buyAmount = get(buyAmountAtom); // 30000
    return budget - buyAmount; // 40000
  },
});

//App.jsx
import { useRecoilValue } from "recoil";
import { remainingAmountAtom } from "./atoms";

export default function App() {
  const money = useRecoilValue(remainingAmountAtom); // 40000

  return <h1>money: {money}</h1>;
}
```

ê·¸ë¦¬ê³  ë¹„ë™ê¸° í†µì‹ ì„ í†µí•œ ë°ì´í„°ë¥¼ ë‹´ê³  ìˆëŠ” selectorê°€ í•„ìš”í•˜ë‹¤ë©´ async/await ì‚¬ìš©í•´ì„œ í•´ê²° í•  ìˆ˜ ìˆë‹¤.

```js
//atom.js
import { selector } from "recoil";

//ìœ ì €ID
export const userIdAtom = atom({
  key: "userId",
  default: "taewok",
});

//í˜„ì¬ ì˜ˆì‚°
export const userInfoAtom = selector({
  key: "userInfo",
  get: async ({ get }) => {
    const userId = get(userIdAtom);
    const res = await axios.get(`https://api.example.com/users/${userId}`);

    return res;
  },
});
```

---

## <b>ë§ˆì¹˜ë©°</b>

<P>í˜¹ì‹œ ì˜ëª»ëœ ì •ë³´ë‚˜ ê¶ê¸ˆí•˜ì‹  ê²Œ ìˆë‹¤ë©´ í¸í•˜ê²Œ ëŒ“ê¸€ ë‹¬ì•„ì£¼ì„¸ìš”.<br/>
ì§€ì ì´ë‚˜ í”¼ë“œë°±ì€ ì–¸ì œë‚˜ í™˜ì˜ì…ë‹ˆë‹¤.</p>
